# ğŸ“š x-env ç¤ºä¾‹é›†åˆ

è¿™ä¸ªç›®å½•åŒ…å«äº† x-env çš„æ ¸å¿ƒä½¿ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºäº†ä»åŸºç¡€é…ç½®åˆ°é«˜çº§åŠŸèƒ½çš„å®Œæ•´ç”¨æ³•ã€‚

## ğŸ¯ æ ¸å¿ƒç¤ºä¾‹

### 1. ç»¼åˆæ¼”ç¤ºé¡¹ç›®

- **`comprehensive-demo/`** - å®Œæ•´çš„ monorepo + å¤–éƒ¨ä¾èµ–åŒ…ç¤ºä¾‹
  - åŒ…å« 3 ä¸ª monorepo é¡¹ç›®ï¼šweb-frontendã€api-backendã€shared-utils
  - åŒ…å« 3 ä¸ªå¤–éƒ¨ä¾èµ–åŒ…ï¼šauth-serviceã€database-clientã€cache-redis
  - æ¼”ç¤º safenv.config è‡ªåŠ¨å‘ç°ã€ç±»å‹å®‰å…¨è§£æã€ä¾èµ–å…³ç³»å›¾ç”Ÿæˆ
  - æ”¯æŒ 3 ç§ exports.safenv æ ¼å¼ï¼šdirectã€nestedã€conditional
  - æä¾›å®Œæ•´çš„æ¼”ç¤ºè„šæœ¬å’ŒéªŒè¯å·¥å…·

### 2. TypeScript ç±»å‹æ¨å¯¼ç¤ºä¾‹

- **`type-inference-demo.ts`** - TypeScript ç±»å‹æ¨å¯¼åŠŸèƒ½æ¼”ç¤º
  - å±•ç¤º `defineVariable` å’Œç±»å‹ç‰¹å®šè¾…åŠ©å‡½æ•°çš„ä½¿ç”¨
  - æ¼”ç¤º `validate` å‡½æ•°å‚æ•°çš„æ­£ç¡®ç±»å‹æ¨å¯¼
  - æä¾›åŒæ­¥å’Œå¼‚æ­¥éªŒè¯å™¨çš„ä½¿ç”¨ç¤ºä¾‹

- **`test-type-inference.js`** - ç±»å‹æ¨å¯¼åŠŸèƒ½è¿è¡Œæ—¶éªŒè¯è„šæœ¬
  - éªŒè¯è¾…åŠ©å‡½æ•°çš„æ­£ç¡®æ€§
  - æµ‹è¯•é…ç½®ç»“æ„å’ŒéªŒè¯å‡½æ•°
  - æä¾›ä½¿ç”¨å»ºè®®å’Œæœ€ä½³å®è·µ

### é«˜çº§é…ç½®

- **`typed-config-demo.config.ts`** - ç±»å‹å®‰å…¨é…ç½®ç¤ºä¾‹
- **`builder-demo.config.ts`** - ä½¿ç”¨é…ç½®æ„å»ºå™¨çš„ç¤ºä¾‹

## ğŸ§ª æµ‹è¯•å’ŒéªŒè¯

### çœŸå®ä¸–ç•Œä½¿ç”¨åœºæ™¯

- **`real-world-usage.ts`** - çœŸå®ä¸–ç•Œä½¿ç”¨åœºæ™¯ç¤ºä¾‹

## ğŸš€ è¿è¡Œç¤ºä¾‹

### Workspace é›†æˆç¤ºä¾‹

```bash
# è¿›å…¥ workspace ç¤ºä¾‹ç›®å½•
cd workspace-demo

# è¿è¡Œè®¾ç½®è„šæœ¬
./scripts/setup.sh

# å¯åŠ¨åŸºç¡€æœåŠ¡
pnpm run start --filter base-service

# å¯åŠ¨ Web åº”ç”¨
pnpm run start --filter web-app

# è¿è¡Œé›†æˆæµ‹è¯•
./scripts/test.sh
```

### æ„å»ºé…ç½®

```bash
# æ„å»ºæ ‡å‡† Schema ç¤ºä¾‹
DATABASE_URL="postgresql://localhost:5432/test" pnpm run build examples/standard-schema-demo.config.ts

# æ„å»ºç±»å‹å®‰å…¨ç¤ºä¾‹
pnpm run build examples/typed-config-demo.config.ts
```

### è¿è¡Œæµ‹è¯•

```bash
# çœŸå®ä¸–ç•Œä½¿ç”¨ç¤ºä¾‹
node --experimental-strip-types examples/real-world-usage.ts
```

## ğŸ“‹ ç¤ºä¾‹è¯´æ˜

### 1. Workspace é›†æˆç¤ºä¾‹ (`workspace-demo/`)

å®Œæ•´çš„ pnpm workspace ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ monorepo ç¯å¢ƒä¸­ä½¿ç”¨ x-envï¼š

- **Base Service**: åŸºç¡€æœåŠ¡é¡¹ç›®ï¼Œå®šä¹‰æ•°æ®åº“ã€Redis å’ŒæœåŠ¡é…ç½®
- **Web App**: Web åº”ç”¨é¡¹ç›®ï¼Œä¾èµ–åŸºç¡€æœåŠ¡å¹¶å®šä¹‰è‡ªå·±çš„é…ç½®
- **ä¾èµ–ç®¡ç†**: æ¼”ç¤ºé¡¹ç›®é—´é…ç½®å…±äº«å’Œè‡ªåŠ¨ä¾èµ–å‘ç°
- **ç¯å¢ƒå˜é‡**: å±•ç¤ºå¤šå±‚çº§ç¯å¢ƒå˜é‡ç®¡ç†å’Œä¼˜å…ˆçº§å¤„ç†

### 2. æ ‡å‡† Schema é…ç½® (`standard-schema-demo.config.ts`)

å±•ç¤ºå¦‚ä½•é…ç½® x-env ç”Ÿæˆç¬¦åˆ Standard Schema V1 è§„èŒƒçš„éªŒè¯ä»£ç ã€‚

### 3. ç±»å‹å®‰å…¨é…ç½® (`typed-config-demo.config.ts`)

æ¼”ç¤ºæ–°çš„ç±»å‹å®‰å…¨é…ç½®ç³»ç»Ÿï¼ŒåŒ…æ‹¬çº¦æŸå®šä¹‰å’ŒéªŒè¯å™¨ä½¿ç”¨ã€‚

### 4. é…ç½®æ„å»ºå™¨ (`builder-demo.config.ts`)

å±•ç¤ºå¦‚ä½•ä½¿ç”¨ç±»å‹å®‰å…¨çš„é…ç½®æ„å»ºå™¨æ¥åˆ›å»ºå¤æ‚çš„é…ç½®ã€‚

### 5. ä¾èµ–ç®¡ç†ç¤ºä¾‹ (`dependency-example.config.ts`)

æ¼”ç¤ºå¦‚ä½•åœ¨é…ç½®ä¸­å®šä¹‰å’Œç®¡ç†é¡¹ç›®é—´çš„ä¾èµ–å…³ç³»ã€‚

### 6. çœŸå®ä¸–ç•Œä½¿ç”¨ (`real-world-usage.ts`)

å±•ç¤ºåœ¨å®é™…é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ä¸åŒçš„éªŒè¯åº“æ¥éªŒè¯é…ç½®ã€‚

## ğŸ¯ æœ€ä½³å®è·µ

1. **ä½¿ç”¨ Workspace é›†æˆ** - åœ¨ monorepo ç¯å¢ƒä¸­ç»Ÿä¸€ç®¡ç†ç¯å¢ƒå˜é‡
2. **å¯ç”¨è‡ªåŠ¨ä¾èµ–å‘ç°** - ä½¿ç”¨ `autoDependencies` ç®€åŒ–é¡¹ç›®é—´é…ç½®å…±äº«
3. **ä½¿ç”¨ç±»å‹å®‰å…¨çš„é…ç½®æ„å»ºå™¨** - é¿å…è¿è¡Œæ—¶é”™è¯¯
4. **åˆ©ç”¨çº¦æŸç³»ç»Ÿ** - ç¡®ä¿é…ç½®çš„æœ‰æ•ˆæ€§
5. **é€‰æ‹©åˆé€‚çš„éªŒè¯åº“** - æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹© Zodã€Valibot æˆ– ArkType
6. **éµå¾ª Standard Schema è§„èŒƒ** - ç¡®ä¿ç”Ÿæ€å…¼å®¹æ€§
7. **æä¾›ç¯å¢ƒå˜é‡æ¨¡æ¿** - ä½¿ç”¨ `.env.example` æ–‡ä»¶æŒ‡å¯¼é…ç½®

## ğŸ“– æ›´å¤šä¿¡æ¯

- [ç±»å‹ç³»ç»Ÿå‡çº§æ–‡æ¡£](../TYPE_SYSTEM_UPGRADE.md)
- [ç±»å‹é—®é¢˜ä¿®å¤æ–‡æ¡£](../TYPE_ISSUES_FIXED.md)
- [é¡¹ç›®ä¸»æ–‡æ¡£](../README.md)
